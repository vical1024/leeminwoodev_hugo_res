---
title: "Yocto intro"
date: 2021-01-23T21:36:54+09:00
Description: ""
Categories: []
DisableComments: false
---
x86 아키텍처는 Intel과 AMD의 프로세서에서 널리 사용되는 아키텍처로 범용성이 좋아 운영 체제와 소프트웨어를 지원하며 많은 개발자와 사용자들이 익숙하게 사용하고 있다. 지금 이 글을 쓰는 컴퓨터는 물론 거의 대대분의 개인 컴퓨터 및 서버 시장에서 사용되고 있으며, 이 유명세에 힘입어 대부분의 배포판 리눅스들은 대부분 x86 아키텍처를 기반으로 개발되고 지원되고 최적화되어 있다.

하지만 임베디드 제품 환경에서는 상황이 다르다. 임베디드 제품에는 다양한 CPU 아키텍쳐들이 폭넓게 사용된다. 따라서 당연히 x86 아키텍처을 주력으로 하는 배포판 리눅스를 사용하기 어렵다. 대신 임베디드 Linux의 개발은 보통 Bottom-Up으로 잰행된다. Bootloader, Kernel의 선택부터 필수적인 Package, User Application의 추가, 그리고 이를 Build, Install, Packaging하는 과정까지 사용자가 세세하게 관리하며 원하는 최적의 Customized Linux를 만들어 내는 것이다.

리눅스 임베디드 그룹(Linux Embedded Group)은 이런 과정을 효율적으로 통제할 수 있는 도구를 개발하기로 한다. 2010년 초기버전의 Yocto Project는 이 버전은 OpenEmbedded과 BitBake를 완성했으며, 임베디드 리눅스 개발을 위한 기본 도구와 문서를 제공했다. 그 다음년도에  완전한 리눅스 시스템 이미지를 생성하는 기능을 제공하는 Poky를 추가하며 현재 우리가 사용하는 Yocto의 기본적인 형태를 완성했다. 이후에 디버깅 기능을 지원하는 SDK를 배포하고, 하드웨어 아키텍처 확장성을 넓히고, 빌드 시스템을 개선하는 등의 개선이 있었지만 중요 기능은 위에서 언급한 OpenEmbedded, BitBake, Poky 이 3가지라고 말할 수 있다. 비유하자면 아래와 같다.

- Poky는 Yocto Project의 임베디드 리눅스 시스템을 구축하기 위한 기본 설정과 패키지들를 제공한다. Poky는 건축가가 건물을 디자인하는 도면과 설계도와 같다. 건축가가 도면을 기반으로 건물의 구조와 기능을 결정하고 설계하듯 개발자는 Recipe를 통해 내가 만들 무언가를 구성할 내용들을 정해진 양식을 따라 다양하게 정의할 수 있다.

- bitbake는 빌드 및 패키지 관리 도구로 Yocto Project에서 Recipe를 읽은 후 이 Recipe대로 산출물을 빌드하고 이미지를 생성하는 역할을 한다. 비유를 한다면 Bitbake는 건축 현장에서 작업하는 공사 인부라고 할 수 있다. 건축가가 설계한 도면을 기반으로 공사 인부는 재료를 조합하고 구조물을 건설한다.

- 설계도도 있고 일할 사람도 있고... 이제 재료가 필요하다. OpenEmbedded는 Yocto Project의 빌드 시스템으로 리눅스 기반 시스템에 필요한 다양한 패키지와 컴포넌트를 관리한다. 역시 예를 들자면 OpenEmbedded는 건축 현장의 자재 장부와 같다. 다양한 종류의 건축 자재와 도구를 보유 혹은 정보를 관리하고 있으며 필요한 자재를 (혹은 자재 정보를) 공사 인부에게 제공한다.

위에서 언급한 Recipe는 소프트웨어 패키지의 추가, 의존성 관리, 커스텀 레이어 생성 등을 정말 다양하게 지원하여 개발자가 원하는 방식으로 시스템을 구축할 수 있도록 도와준다. 지원하는 항목이 너무 다양해 이를 설명하는 메뉴얼의 이름도 메가 메뉴얼일 정도이다. (https://docs.yoctoproject.org/singleindex.html)
